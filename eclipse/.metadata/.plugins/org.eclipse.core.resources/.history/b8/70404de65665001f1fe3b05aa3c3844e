package Basil.module.movement;

import java.util.ArrayList;

import org.lwjgl.input.Keyboard;

import Basil.Client;
import Basil.module.Category;
import Basil.module.Module;
import Basil.utils.esp.BlinkUtils;
import de.Hero.settings.Setting;
import net.minecraft.network.play.client.C03PacketPlayer;

public class Blink extends Basil.module.Module{
	
	public static ArrayList<C03PacketPlayer> packets = new ArrayList<>();
	public static boolean capture = false;
	public static double lastX = 0;
	public static double lastY = 0;
	public static double lastZ = 0;
	
	public Blink() {
		super("Blink", -1, Category.MOVEMENT);
	}
	
	public void setup() {
		Client.sm.rSetting(new Setting("Marker", this, true));
		Client.sm.rSetting(new Setting("Marker Line Width", this, 2, 1, 8, true));
	}
	
	public void onEnable() {
		capture = true;
		lastX = mc.thePlayer.posX;
		lastY = mc.thePlayer.posY;
		lastZ = mc.thePlayer.posZ;
	}
	
	public void onRender() {
		if (isToggled()) {
			if (Client.sm.getSettingsByMod(this).get(0).getValBoolean())
				BlinkUtils.setLineWidth((float) Client.sm.getSettingsByMod(this).get(1).getValDouble());
				BlinkUtils.blockESPBox(lastX, lastY, lastZ);
		}
	}
	
	public void onDisable() {
		capture = false;
		for (int i = 0; i < packets.size(); i++) {
			mc.thePlayer.sendQueue.addToSendQueue(packets.get(i));
		}
		packets = new ArrayList<>();
	}
}
